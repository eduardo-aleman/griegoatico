{{ $current := . }}
{{ $pages := sort .Parent.Pages "Weight" }}
{{ $index := -1 }}

{{ range $i, $p := $pages }}
  {{ if eq $p.RelPermalink $current.RelPermalink }}
    {{ $index = $i }}
  {{ end }}
{{ end }}

<nav class="lesson-nav" style="margin-top: 3rem; border-top: 1px solid #ccc; padding-top: 1rem;">
  <div style="display: flex; justify-content: space-between;">
    {{ if ge $index 1 }}
      {{ $prev := index $pages (sub $index 1) }}
      <a class="prev-lesson" href="{{ $prev.RelPermalink }}">← {{ $prev.Title }}</a>
    {{ else }}
      <span></span>
    {{ end }}

    {{ if lt (add $index 1) (len $pages) }}
      {{ $next := index $pages (add $index 1) }}
      <a class="next-lesson" href="{{ $next.RelPermalink }}">{{ $next.Title }} →</a>
    {{ else }}
      <span></span>
    {{ end }}
  </div>
</nav>